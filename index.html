<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Health Monitor App</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .phone-container {
            width: 100%;
            max-width: 400px;
            height: 800px;
            background: black;
            border-radius: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
            position: relative;
        }

        .screen {
            display: none;
            height: 100%;
            overflow-y: auto;
            animation: fadeIn 0.3s ease;
        }

        .screen.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateX(20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, #27641d 0%, #000000 100%);
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            font-size: 24px;
            font-weight: 600;
        }

        .back-btn {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Home Screen */
        .home-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            padding: 20px;
        }

        .home-card {
            background-color: green;
            color: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            text-align: center;
        }

        .home-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.15);
        }

        .home-card h3 {
            font-size: 16px;
            margin-bottom: 10px;
            color: white;
        }

        .home-card .icon {
            font-size: 48px;
            margin-bottom: 10px;
        }

        /* Heart Rate Display */
        .heart-rate-display {
            background: #0a1628;
            color: white;
            padding: 40px 20px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .heart-rate-display::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 150px;
            background: radial-gradient(ellipse at top, rgba(34, 197, 94, 0.3), transparent);
            pointer-events: none;
        }

        .heart-rate-display::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 150px;
            background: radial-gradient(ellipse at bottom, rgba(34, 197, 94, 0.2), transparent);
            pointer-events: none;
        }

        .heart-icon-container {
            position: relative;
            display: inline-block;
            margin-bottom: 20px;
        }

        .heart-icon {
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            box-shadow: 0 0 30px rgba(34, 197, 94, 0.5);
        }

        .heart-icon svg {
            width: 50px;
            height: 50px;
            fill: none;
            stroke: white;
            stroke-width: 2;
        }

        .ecg-line {
            position: absolute;
            right: -150px;
            top: 50%;
            transform: translateY(-50%);
        }

        .ecg-line svg {
            width: 400px;
            height: 100px;
        }

        .bpm-value {
            font-size: 72px;
            font-weight: bold;
            margin: 20px 0 10px 0;
            position: relative;
            z-index: 1;
        }

        .bpm-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            position: relative;
            z-index: 1;
        }

        .control-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.5);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .control-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }

        .control-btn:active {
            transform: scale(0.95);
        }

        .reset-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.5);
            color: white;
            padding: 10px 25px;
            border-radius: 25px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
            margin-top: 15px;
        }

        .reset-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .bpm-label {
            font-size: 24px;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }

        .chart-container {
            padding: 20px;
            background: #0a1628;
            position: relative;
        }

        .chart {
            width: 100%;
            height: 200px;
            background: linear-gradient(to bottom, rgba(34, 197, 94, 0.1), transparent);
            border: 2px solid rgba(34, 197, 94, 0.3);
            border-radius: 15px;
            padding: 15px;
            position: relative;
            box-shadow: 0 0 20px rgba(34, 197, 94, 0.2);
        }

        .chart-grid {
            position: absolute;
            top: 15px;
            left: 15px;
            right: 15px;
            bottom: 15px;
        }

        .grid-line {
            position: absolute;
            left: 0;
            right: 0;
            height: 1px;
            background: rgba(34, 197, 94, 0.2);
        }

        .y-label {
            position: absolute;
            left: -5px;
            color: #22c55e;
            font-size: 11px;
            transform: translateY(-50%);
        }

        .x-label {
            position: absolute;
            bottom: -20px;
            color: #22c55e;
            font-size: 10px;
            transform: translateX(-50%);
        }

        .line-chart-svg {
            position: absolute;
            top: 15px;
            left: 40px;
            width: calc(100% - 55px);
            height: calc(100% - 40px);
        }

        .bpm-input-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-top: 20px;
            position: relative;
            z-index: 1;
        }

        .bpm-input {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.5);
            color: white;
            padding: 10px 20px;
            border-radius: 10px;
            font-size: 18px;
            width: 100px;
            text-align: center;
            outline: none;
        }

        .bpm-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .set-btn {
            background: rgba(34, 197, 94, 0.8);
            border: 2px solid rgba(34, 197, 94, 1);
            color: white;
            padding: 10px 20px;
            border-radius: 10px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 600;
        }

        .set-btn:hover {
            background: rgba(34, 197, 94, 1);
            transform: scale(1.05);
        }

        .set-btn:active {
            transform: scale(0.95);
        }

        /* Products */
        .products-header {
            background: linear-gradient(90deg, #1a5f0f 0%, #2d8a1e 50%, #000000 100%);
            padding: 15px 20px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .products-header .star-icon {
            font-size: 32px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .products-header .star-icon:hover {
            transform: scale(1.2) rotate(15deg);
        }

        .products-header .star-icon:active {
            transform: scale(0.9);
        }

        .search-container {
            flex: 1;
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 25px;
            padding: 8px 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .search-container input {
            flex: 1;
            background: transparent;
            border: none;
            color: white;
            font-size: 14px;
            outline: none;
        }

        .search-container input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        .header-icons {
            display: flex;
            gap: 15px;
        }

        .header-icon-btn {
            background: none;
            border: none;
            color: #a5d93f;
            font-size: 28px;
            cursor: pointer;
        }

        .products-list {
            padding: 20px;
            background: #0a1628;
            min-height: calc(100% - 70px);
        }

        .product-card {
            background: linear-gradient(135deg, #2d5f1e 0%, #1a4012 100%);
            border-radius: 25px;
            padding: 15px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }

        .product-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(165, 217, 63, 0.1) 0%, transparent 100%);
            pointer-events: none;
        }

        .product-image-container {
            background: linear-gradient(135deg, #8b9a88 0%, #6a7668 100%);
            border-radius: 20px;
            padding: 15px;
            min-width: 140px;
            height: 140px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .product-image-container img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }

        .product-info {
            flex: 1;
            color: white;
            position: relative;
            z-index: 1;
        }

        .product-info h3 {
            font-size: 22px;
            margin-bottom: 8px;
            color: white;
            font-weight: 600;
        }

        .product-info p {
            font-size: 16px;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 8px;
        }

        .product-price {
            font-size: 20px;
            font-weight: bold;
            color: white;
            margin-bottom: 10px;
        }

        .product-details-icon {
            color: #a5d93f;
            font-size: 32px;
            margin-top: 5px;
        }

        .add-to-cart-btn {
            background: linear-gradient(135deg, #a5d93f 0%, #8bc34a 100%);
            color: #1a4012;
            border: none;
            padding: 12px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 28px;
            transition: transform 0.2s;
            min-width: 80px;
            height: 80px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 10px rgba(165, 217, 63, 0.3);
            line-height: 1;
        }

        .add-to-cart-btn:hover {
            transform: scale(1.05);
        }

        .add-to-cart-btn:active {
            transform: scale(0.95);
        }

        /* Cart */
        .cart-items {
            padding: 20px;
        }

        .cart-item {
            background: white;
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .cart-total {
            padding: 20px;
            background: #f5f5f5;
            margin: 0 20px;
            border-radius: 15px;
            text-align: center;
        }

        .cart-total h3 {
            font-size: 24px;
            color: #333;
            margin-bottom: 10px;
        }

        .checkout-btn {
            width: calc(100% - 40px);
            margin: 20px;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 25px;
            font-size: 18px;
            cursor: pointer;
            font-weight: 600;
        }

        /* Profile */
        /* Account Screen */
        .account-container {
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
            min-height: 100%;
        }

        .account-content {
            padding: 20px;
        }

        .account-field {
            background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
            border: 1px solid rgba(34, 197, 94, 0.2);
        }

        .account-field label {
            display: block;
            font-size: 12px;
            color: #22c55e;
            margin-bottom: 5px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .account-field input {
            width: 100%;
            border: none;
            font-size: 16px;
            color: #e0e0e0;
            background: transparent;
        }

        /* App Settings */
        .app-settings-container {
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
            min-height: 100%;
        }

        .profile-content {
            padding: 20px;
        }

        .profile-header {
            background: linear-gradient(135deg, #0a0a0a 0%, #1a4012 100%);
            padding: 30px 20px;
            text-align: center;
            color: white;
        }

        .profile-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: linear-gradient(135deg, #0a0a0a 0%, #22c55e 100%);
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            border: 3px solid #22c55e;
            box-shadow: 0 0 20px rgba(34, 197, 94, 0.4);
        }

        .profile-field {
            background: white;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .profile-field label {
            display: block;
            font-size: 12px;
            color: #666;
            margin-bottom: 5px;
        }

        .profile-field input {
            width: 100%;
            border: none;
            font-size: 16px;
            color: #333;
            background: transparent;
        }

        /* Settings */
        .settings-container {
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
            min-height: 100%;
        }

        .settings-list {
            padding: 20px;
        }

        .settings-item {
            background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%);
            border-radius: 10px;
            padding: 15px 20px;
            margin-bottom: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid rgba(34, 197, 94, 0.2);
        }

        .settings-item:hover {
            background: linear-gradient(135deg, #2a2a2a 0%, #1a1a1a 100%);
            border-color: rgba(34, 197, 94, 0.4);
            transform: translateX(5px);
        }

        .settings-item span {
            font-size: 16px;
            color: #22c55e;
        }

        .settings-item .arrow {
            color: #22c55e;
        }

        .settings-item.danger span {
            color: #f87171;
        }

        /* Membership */
        .membership-card {
            margin: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            padding: 30px;
            color: white;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }

        .membership-price {
            font-size: 48px;
            font-weight: bold;
            margin: 20px 0;
        }

        .membership-details {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid rgba(255,255,255,0.3);
        }

        .membership-detail {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        /* Coupons */
        .coupons-container {
            padding: 20px;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
            min-height: 100%;
            position: relative;
        }

        .congrats-flash {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
            color: #0a0a0a;
            padding: 30px 50px;
            border-radius: 20px;
            font-size: 28px;
            font-weight: bold;
            z-index: 9999;
            box-shadow: 0 10px 40px rgba(255, 215, 0, 0.6);
            animation: flashAnimation 1s ease-in-out;
            text-align: center;
        }

        @keyframes flashAnimation {
            0% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.5);
            }
            50% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1.1);
            }
            100% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.8);
            }
        }

        .points-balance {
            background: linear-gradient(135deg, #1a1a1a 0%, #22c55e 100%);
            border-radius: 20px;
            padding: 30px;
            color: white;
            text-align: center;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(34, 197, 94, 0.3);
            border: 2px solid rgba(34, 197, 94, 0.5);
        }

        .points-value {
            font-size: 64px;
            font-weight: bold;
            margin: 10px 0;
            text-shadow: 0 0 20px rgba(34, 197, 94, 0.5);
        }

        .coupon-card {
            background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 1px solid rgba(34, 197, 94, 0.3);
            transition: all 0.2s;
        }

        .coupon-card:hover {
            border-color: rgba(34, 197, 94, 0.6);
            transform: translateY(-3px);
        }

        .coupon-discount {
            font-size: 32px;
            font-weight: bold;
            color: #22c55e;
            text-shadow: 0 0 10px rgba(34, 197, 94, 0.3);
        }

        .coupon-card p {
            color: #a0a0a0;
        }

        .apply-btn {
            background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
            color: white;
            border: none;
            padding: 10px 25px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            box-shadow: 0 4px 10px rgba(34, 197, 94, 0.3);
            transition: all 0.2s;
        }

        .apply-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 15px rgba(34, 197, 94, 0.5);
        }

        .coupons-title {
            color: #22c55e;
            margin: 20px 0 10px 0;
            font-size: 18px;
        }

        /* Blood Pressure */
        .bp-container {
            background: linear-gradient(135deg, #22c55e 0%, #16a34a 50%, #0a1628 100%);
            min-height: 100%;
            position: relative;
        }

        .bp-header-icon {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 80px;
            height: 80px;
        }

        .bp-display {
            padding: 40px 20px 20px 20px;
            text-align: center;
            color: white;
        }

        .bp-display h2 {
            font-size: 20px;
            margin-bottom: 20px;
            font-weight: 400;
        }

        .bp-description {
            color: white;
            margin: 20px 0;
            line-height: 1.6;
            font-size: 15px;
            padding: 0 10px;
        }

        .bp-info-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            background: white;
            border-radius: 50%;
            color: #22c55e;
            font-size: 18px;
            font-weight: bold;
            margin-left: 10px;
        }

        .scatter-plot-container {
            margin: 30px 20px 20px 20px;
            background: linear-gradient(135deg, #8b9a88 0%, #6a7668 100%);
            border-radius: 25px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .scatter-plot {
            width: 100%;
            height: 400px;
            background: #d4d4d4;
            border-radius: 15px;
            position: relative;
            padding: 30px 20px 40px 60px;
        }

        .bp-grid {
            position: absolute;
            top: 30px;
            left: 60px;
            right: 20px;
            bottom: 40px;
        }

        .bp-grid-line {
            position: absolute;
            left: 0;
            right: 0;
            height: 1px;
            background: #999;
        }

        .bp-grid-line-vertical {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 1px;
            background: #999;
        }

        .bp-y-label {
            position: absolute;
            left: -50px;
            color: #333;
            font-size: 16px;
            font-weight: 600;
            transform: translateY(-50%);
        }

        .bp-x-label {
            position: absolute;
            bottom: -30px;
            color: #333;
            font-size: 14px;
            font-weight: 600;
            transform: translateX(-50%);
        }

        .bp-data-point {
            position: absolute;
            width: 16px;
            height: 16px;
            background: #3b82f6;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .bp-data-point:hover {
            transform: translate(-50%, -50%) scale(1.3);
            background: #2563eb;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        .bp-input-container {
            text-align: center;
            margin-top: 30px;
            padding: 0 20px;
        }

        .bp-input-wrapper {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-top: 15px;
        }

        .bp-input {
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid #22c55e;
            color: #333;
            padding: 12px 20px;
            border-radius: 10px;
            font-size: 18px;
            width: 140px;
            text-align: center;
            outline: none;
            font-weight: bold;
        }

        .bp-input::placeholder {
            color: #999;
            font-weight: normal;
        }

        .bp-set-btn {
            background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
            border: none;
            color: white;
            padding: 12px 25px;
            border-radius: 10px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 600;
            box-shadow: 0 4px 10px rgba(34, 197, 94, 0.3);
        }

        .bp-set-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 15px rgba(34, 197, 94, 0.5);
        }

        .bp-set-btn:active {
            transform: scale(0.95);
        }

        .bp-input-label {
            color: white;
            font-size: 14px;
            margin-bottom: 10px;
        }

        .bp-value {
            font-size: 64px;
            font-weight: bold;
            color: #667eea;
            margin: 20px 0;
        }

        /* Sleep Performance */
        .sleep-container {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100%;
            position: relative;
        }

        .sleep-header-icon {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .sleep-main-card {
            margin: 80px 20px 20px 20px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 30px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        }

        .sleep-title-section {
            text-align: center;
            margin-bottom: 30px;
        }

        .sleep-title-section h2 {
            font-size: 28px;
            color: #333;
            margin-bottom: 10px;
        }

        .sleep-title-section p {
            font-size: 14px;
            color: #666;
        }

        .sleep-time-display {
            text-align: center;
            margin-bottom: 30px;
        }

        .sleep-time-large {
            font-size: 72px;
            font-weight: bold;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1;
            margin-bottom: 10px;
        }

        .sleep-time-label {
            font-size: 16px;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .sleep-quality-indicator {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-bottom: 30px;
        }

        .quality-badge {
            background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
            color: white;
            padding: 10px 25px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 16px;
        }

        .quality-stars {
            font-size: 24px;
        }

        .sleep-chart-wrapper {
            margin: 30px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 20px;
        }

        .sleep-pie-chart {
            width: 100%;
            max-width: 280px;
            height: 280px;
            margin: 0 auto 20px;
            position: relative;
        }

        .sleep-pie-chart canvas {
            width: 100%;
            height: 100%;
        }

        .sleep-stages-list {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .sleep-stage-item {
            background: white;
            padding: 15px;
            border-radius: 15px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            text-align: center;
        }

        .sleep-stage-color {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin: 0 auto 10px;
        }

        .sleep-stage-item h4 {
            font-size: 14px;
            color: #333;
            margin-bottom: 5px;
        }

        .sleep-stage-item .percentage {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
        }

        .sleep-stage-item .duration {
            font-size: 12px;
            color: #999;
        }

        /* Points System */
        .points-screen-container {
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 50%, #ea580c 100%);
            min-height: 100%;
            position: relative;
        }

        .points-trophy-icon {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            animation: bounce 2s ease-in-out infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-15px); }
        }

        .points-main-display {
            padding: 80px 20px 20px 20px;
            text-align: center;
        }

        .points-circle {
            width: 200px;
            height: 200px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 50%;
            margin: 0 auto 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            position: relative;
        }

        .points-circle::before {
            content: '';
            position: absolute;
            width: 220px;
            height: 220px;
            border-radius: 50%;
            border: 3px dashed rgba(255, 255, 255, 0.5);
            animation: rotate 20s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .points-number {
            font-size: 64px;
            font-weight: bold;
            background: linear-gradient(135deg, #fbbf24 0%, #ea580c 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .points-label {
            font-size: 16px;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .add-points-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
            color: white;
            border: none;
            font-size: 32px;
            cursor: pointer;
            box-shadow: 0 5px 20px rgba(34, 197, 94, 0.4);
            transition: all 0.3s;
            margin: 20px auto;
            display: block;
        }

        .add-points-btn:hover {
            transform: scale(1.1);
        }

        .add-points-btn:active {
            transform: scale(0.95);
        }

        .points-activities {
            margin: 20px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 25px;
            padding: 25px;
        }

        .points-activities h3 {
            font-size: 20px;
            color: #333;
            margin-bottom: 20px;
            text-align: center;
        }

        .activity-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .activity-item:hover {
            background: #e9ecef;
            transform: translateX(5px);
        }

        .activity-info {
            flex: 1;
        }

        .activity-name {
            font-size: 16px;
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
        }

        .activity-desc {
            font-size: 12px;
            color: #666;
        }

        .activity-points {
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 14px;
        }

        .points-history {
            margin: 20px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 25px;
            padding: 25px;
        }

        .points-history h3 {
            font-size: 18px;
            color: #333;
            margin-bottom: 15px;
        }

        .history-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #e0e0e0;
        }

        .history-item:last-child {
            border-bottom: none;
        }

        .history-activity {
            font-size: 14px;
            color: #555;
        }

        .history-points {
            font-weight: bold;
            color: #22c55e;
        }

        .sleep-tips {
            margin-top: 20px;
            padding: 20px;
            background: linear-gradient(135deg, #e0e7ff 0%, #f3e8ff 100%);
            border-radius: 15px;
            border-left: 4px solid #667eea;
        }

        .sleep-tips h3 {
            font-size: 16px;
            color: #333;
            margin-bottom: 10px;
        }

        .sleep-tips ul {
            list-style: none;
            padding: 0;
        }

        .sleep-tips li {
            padding: 8px 0;
            color: #555;
            font-size: 14px;
        }

        .sleep-tips li:before {
            content: "✓ ";
            color: #22c55e;
            font-weight: bold;
            margin-right: 8px;
        }

        /* Stress Monitor */
        .stress-container {
            background: linear-gradient(135deg, #22c55e 0%, #16a34a 50%, #0a1628 100%);
            min-height: 100%;
            position: relative;
        }

        .stress-header-icon {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 80px;
            height: 80px;
        }

        .stress-description {
            padding: 40px 20px 20px 20px;
            text-align: center;
            color: white;
            line-height: 1.6;
            font-size: 15px;
        }

        .stress-info-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            background: white;
            border-radius: 50%;
            color: #22c55e;
            font-size: 18px;
            font-weight: bold;
            margin-left: 10px;
        }

        .stress-gauge-container {
            margin: 20px;
            background: linear-gradient(135deg, #8b9a88 0%, #6a7668 100%);
            border-radius: 25px;
            padding: 30px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .stress-gauge-inner {
            background: rgba(160, 160, 160, 0.5);
            border-radius: 20px;
            padding: 40px 30px;
        }

        .stress-score-display {
            text-align: center;
            font-size: 80px;
            font-weight: bold;
            color: #333;
            margin-bottom: 30px;
        }

        .stress-gauge {
            width: 100%;
            max-width: 400px;
            height: 280px;
            margin: 0 auto 30px;
            position: relative;
        }

        .stress-gauge canvas {
            width: 100%;
            height: 100%;
        }

        .stress-level-badge {
            display: inline-block;
            background: rgba(220, 220, 220, 0.8);
            padding: 15px 50px;
            border-radius: 30px;
            font-size: 36px;
            font-weight: bold;
            color: #1e40af;
            margin-top: 10px;
        }

        .stress-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }

        .stress-control-btn {
            background: rgba(255, 255, 255, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.5);
            color: #333;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .stress-control-btn:hover {
            background: rgba(255, 255, 255, 0.5);
            transform: scale(1.1);
        }

        .stress-control-btn:active {
            transform: scale(0.95);
        }

        .stress-input-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-top: 20px;
        }

        .stress-input {
            background: rgba(255, 255, 255, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.5);
            color: #333;
            padding: 10px 20px;
            border-radius: 10px;
            font-size: 18px;
            width: 100px;
            text-align: center;
            outline: none;
            font-weight: bold;
        }

        .stress-input::placeholder {
            color: rgba(0, 0, 0, 0.4);
        }

        .stress-set-btn {
            background: rgba(34, 197, 94, 0.8);
            border: 2px solid rgba(34, 197, 94, 1);
            color: white;
            padding: 10px 20px;
            border-radius: 10px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 600;
        }

        .stress-set-btn:hover {
            background: rgba(34, 197, 94, 1);
            transform: scale(1.05);
        }

        .stress-set-btn:active {
            transform: scale(0.95);
        }

        .sleep-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }

        .sleep-control-btn {
            background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
            border: none;
            color: white;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            box-shadow: 0 4px 10px rgba(34, 197, 94, 0.3);
        }

        .sleep-control-btn:hover {
            transform: scale(1.1);
        }

        .sleep-control-btn:active {
            transform: scale(0.95);
        }

        .legend {
            margin-top: 30px;
            text-align: center;
        }

        .stress-legend h3 {
            color: white;
            font-size: 20px;
            margin-bottom: 15px;
        }

        .stress-legend-item {
            margin: 10px 0;
            padding: 12px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
        }

        .stress-legend-item .title {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stress-legend-item.low .title {
            color: #3b82f6;
        }

        .stress-legend-item.medium .title {
            color: #22c55e;
        }

        .stress-legend-item.high .title {
            color: #f97316;
        }

        .stress-legend-item .description {
            color: #333;
            font-size: 14px;
        }

        .stress-display {
            padding: 20px;
        }

        .stress-meter {
            text-align: center;
            padding: 40px 20px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            border-radius: 20px;
            margin-bottom: 20px;
        }

        .stress-score {
            font-size: 64px;
            font-weight: bold;
            margin: 20px 0;
        }

        .stress-info {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        /* Calendar */
        .calendar-container {
            padding: 20px;
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 10px;
        }

        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            background: white;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            position: relative;
        }

        .calendar-day:hover {
            background: #667eea;
            color: white;
            transform: scale(1.05);
        }

        .calendar-day.today {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .calendar-day.has-event::after {
            content: '•';
            position: absolute;
            bottom: 2px;
            font-size: 20px;
            color: #22c55e;
        }

        .calendar-day.has-event.today::after {
            color: #ffd700;
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 400px;
            background: white;
            border-top: 1px solid #e0e0e0;
            display: flex;
            justify-content: space-around;
            padding: 2px 0;
        }

        .nav-item {
            text-align: center;
            cursor: pointer;
            padding: 1px 6px;
            transition: all 0.2s;
            flex: 1;
        }

        .nav-item:hover {
            background: #f5f5f5;
            border-radius: 4px;
        }

        .nav-item.active {
            color: #667eea;
        }

        .nav-icon {
            font-size: 16px;
            margin-bottom: 0px;
        }

        .nav-label {
            font-size: 7px;
            line-height: 1;
        }

        /* Chat Feature */
        .chat-container {
            display: flex;
            flex-direction: column;
            height: 100%;
            background: #0a1628;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .chat-message {
            display: flex;
            gap: 10px;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .chat-message.user {
            flex-direction: row-reverse;
        }

        .chat-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            flex-shrink: 0;
        }

        .chat-message.bot .chat-avatar {
            background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
        }

        .chat-message.user .chat-avatar {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .chat-bubble {
            max-width: 70%;
            padding: 12px 16px;
            border-radius: 18px;
            line-height: 1.4;
        }

        .chat-message.bot .chat-bubble {
            background: linear-gradient(135deg, #2d5f1e 0%, #1a4012 100%);
            color: white;
            border-bottom-left-radius: 4px;
        }

        .chat-message.user .chat-bubble {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-bottom-right-radius: 4px;
        }

        .chat-input-container {
            padding: 15px 20px;
            background: #1a2332;
            border-top: 1px solid rgba(34, 197, 94, 0.2);
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .chat-input {
            flex: 1;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(34, 197, 94, 0.3);
            border-radius: 25px;
            padding: 12px 20px;
            color: white;
            font-size: 14px;
            outline: none;
        }

        .chat-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .chat-send-btn {
            background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
            border: none;
            color: white;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.2s;
        }

        .chat-send-btn:hover {
            transform: scale(1.05);
        }

        .chat-send-btn:active {
            transform: scale(0.95);
        }

        .quick-replies {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin-top: 10px;
        }

        .quick-reply-btn {
            background: rgba(34, 197, 94, 0.2);
            border: 1px solid rgba(34, 197, 94, 0.3);
            color: #22c55e;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .quick-reply-btn:hover {
            background: rgba(34, 197, 94, 0.3);
            transform: translateY(-2px);
        }

        .remove-btn {
            background: #f5576c;
            color: white;
            border: none;
            padding: 5px 15px;
            border-radius: 15px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="phone-container">
        <!-- Home Screen -->
        <div id="home" class="screen active">
            <div class="header">
                <h1>Energy</h1>
            </div>
            <div class="home-grid">
                <div class="home-card" onclick="showScreen('heartRate')">
                    <div class="icon">❤️</div>
                    <h3>Heart Rate</h3>
                    <p style="font-size: 24px; color: white; font-weight: bold;">87 BPM</p>
                </div>
                <div class="home-card" onclick="showScreen('stress')">
                    <div class="icon">😌</div>
                    <h3>Stress Monitor</h3>
                </div>
                <div class="home-card" onclick="showScreen('sleep')">
                    <div class="icon">😴</div>
                    <h3>Sleep Performance</h3>
                </div>
                <div class="home-card" onclick="showScreen('bloodPressure')">
                    <div class="icon">💓</div>
                    <h3>Blood Pressure</h3>
                </div>
                <div class="home-card" onclick="showScreen('calendar')">
                    <div class="icon">📅</div>
                    <h3>Health Calendar</h3>
                </div>
                <div class="home-card" onclick="showScreen('products')">
                    <div class="icon">🥤</div>
                    <h3>Products</h3>
                </div>
                <div class="home-card" onclick="showScreen('chat')">
                    <div class="icon">💬</div>
                    <h3>Health Assistant</h3>
                </div>
                <div class="home-card" onclick="showScreen('coupons')">
                    <div class="icon">🎫</div>
                    <h3>Coupons & Offers</h3>
                </div>
            </div>
        </div>

        <!-- Heart Rate Screen -->
        <div id="heartRate" class="screen">
            <div class="header" style="background: #0a1628;">
                <button class="back-btn" onclick="showScreen('home')">←</button>
                <div style="width: 36px;"></div>
            </div>
            <div class="heart-rate-display">
                <div class="heart-icon-container">
                    <div class="heart-icon">
                        <svg viewBox="0 0 24 24">
                            <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" stroke="white" fill="none" stroke-width="2"/>
                            <path d="M2 10 L6 10 L8 6 L10 14 L12 10 L14 10" stroke="white" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <div class="ecg-line">
                        <svg viewBox="0 0 400 100" preserveAspectRatio="none">
                            <path d="M0,50 L80,50 L90,30 L100,70 L110,20 L120,50 L400,50" 
                                  stroke="#22c55e" 
                                  fill="none" 
                                  stroke-width="2.5"
                                  stroke-linecap="round"
                                  stroke-linejoin="round"/>
                        </svg>
                    </div>
                </div>
                <div class="bpm-value" id="heartRateValue">87</div>
                <div class="bpm-label">BPM</div>
                <div class="bpm-controls">
                    <button class="control-btn" onclick="adjustHeartRate(-5)">−</button>
                    <button class="control-btn" onclick="adjustHeartRate(5)">+</button>
                </div>
                <button class="reset-btn" onclick="resetHeartRate()">Reset to Normal</button>
            </div>
            <div class="chart-container">
                <div class="chart">
                    <div class="chart-grid">
                        <div class="grid-line" style="top: 0%;"><span class="y-label">160</span></div>
                        <div class="grid-line" style="top: 20%;"><span class="y-label">140</span></div>
                        <div class="grid-line" style="top: 40%;"><span class="y-label">120</span></div>
                        <div class="grid-line" style="top: 60%;"><span class="y-label">100</span></div>
                        <div class="grid-line" style="top: 80%;"><span class="y-label">80</span></div>
                        <div class="grid-line" style="top: 100%;"><span class="y-label">60</span></div>
                    </div>
                    <svg class="line-chart-svg" viewBox="0 0 500 100" preserveAspectRatio="none">
                        <defs>
                            <linearGradient id="lineGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                                <stop offset="0%" style="stop-color:#22c55e;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#16a34a;stop-opacity:1" />
                            </linearGradient>
                        </defs>
                        <polyline id="heartRateLine"
                            points="0,73 100,55 200,45 300,60 400,12.5 500,10"
                            fill="none"
                            stroke="url(#lineGradient)"
                            stroke-width="3"
                            stroke-linecap="round"
                            stroke-linejoin="round"/>
                        <circle cx="0" cy="73" r="4" fill="#22c55e" class="hr-point"/>
                        <circle cx="100" cy="55" r="4" fill="#22c55e" class="hr-point"/>
                        <circle cx="200" cy="45" r="4" fill="#22c55e" class="hr-point"/>
                        <circle cx="300" cy="60" r="4" fill="#22c55e" class="hr-point"/>
                        <circle cx="400" cy="12.5" r="4" fill="#22c55e" class="hr-point"/>
                        <circle cx="500" cy="10" r="4" fill="#22c55e" class="hr-point"/>
                    </svg>
                    <span class="x-label" style="left: 15%;">Item 1</span>
                    <span class="x-label" style="left: 30%;">Item 2</span>
                    <span class="x-label" style="left: 45%;">Item 3</span>
                    <span class="x-label" style="left: 60%;">Item 4</span>
                    <span class="x-label" style="left: 85%;">Item 5</span>
                </div>
                <div class="bpm-input-container">
                    <input type="number" class="bpm-input" id="bpmInput" placeholder="Enter BPM" min="40" max="200">
                    <button class="set-btn" onclick="setHeartRateFromInput()">Set</button>
                </div>
            </div>
        </div>

        <!-- Products Screen -->
        <div id="products" class="screen">
            <div class="products-header">
                <button class="back-btn" onclick="showScreen('home')" style="background: rgba(255,255,255,0.1);">←</button>
                <span class="star-icon" onclick="showScreen('coupons')" title="View Coupons & Offers">✨</span>
                <div class="search-container">
                    <span style="font-size: 20px; color: white;">🔍</span>
                    <input type="text" placeholder="Search products...">
                </div>
                <div class="header-icons">
                    <button class="header-icon-btn">📋</button>
                    <button class="header-icon-btn" onclick="showScreen('cart')">🛒</button>
                </div>
            </div>
            <div class="products-list">
                <div class="product-card">
                    <div class="product-image-container">
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 200 150'%3E%3Crect fill='%23e74c3c' width='20' height='120' x='15' y='15' rx='8'/%3E%3Crect fill='%23e67e22' width='20' height='120' x='38' y='15' rx='8'/%3E%3Crect fill='%23f39c12' width='20' height='120' x='61' y='15' rx='8'/%3E%3Crect fill='%23f1c40f' width='20' height='120' x='84' y='15' rx='8'/%3E%3Crect fill='%2316a085' width='20' height='120' x='107' y='15' rx='8'/%3E%3Crect fill='%233498db' width='20' height='120' x='130' y='15' rx='8'/%3E%3Crect fill='%232980b9' width='20' height='120' x='153' y='15' rx='8'/%3E%3Crect fill='%239b59b6' width='20' height='120' x='176' y='15' rx='8'/%3E%3Ctext x='100' y='145' font-family='Arial' font-size='14' font-weight='bold' fill='white' text-anchor='middle'%3ENeuro%3C/text%3E%3C/svg%3E" alt="Neuro Drinks">
                    </div>
                    <div class="product-info">
                        <h3>Neuro drinks</h3>
                        <p>sugar free drinks</p>
                        <div class="product-price">price : 29.99 AED</div>
                        <div class="product-details-icon">📋</div>
                    </div>
                    <button class="add-to-cart-btn" onclick="addToCart('Neuro drinks', 29.99, 'sugar free drinks')">🛒<span style="font-size: 20px;">+</span></button>
                </div>
                
                <div class="product-card">
                    <div class="product-image-container">
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 200 150'%3E%3Crect fill='%232d5f1e' width='110' height='120' x='45' y='15' rx='8'/%3E%3Ctext x='100' y='45' font-family='Arial' font-size='12' font-weight='bold' fill='white' text-anchor='middle'%3EORGANIC%3C/text%3E%3Ctext x='100' y='75' font-family='Arial' font-size='22' font-weight='bold' fill='white' text-anchor='middle'%3EGREEN%3C/text%3E%3Ctext x='100' y='100' font-family='Arial' font-size='18' font-weight='bold' fill='white' text-anchor='middle'%3ETEA BAGS%3C/text%3E%3Ccircle cx='65' cy='35' r='18' fill='white'/%3E%3Ctext x='65' y='42' font-family='Arial' font-size='12' font-weight='bold' fill='%232d5f1e' text-anchor='middle'%3E100%3C/text%3E%3Cellipse cx='130' cy='110' rx='20' ry='12' fill='%23d4a574'/%3E%3C/svg%3E" alt="Green Tea">
                    </div>
                    <div class="product-info">
                        <h3>Green Tea</h3>
                        <p>Health beneficial</p>
                        <div class="product-price">price: 22.99 AED</div>
                        <div class="product-details-icon">📋</div>
                    </div>
                    <button class="add-to-cart-btn" onclick="addToCart('Green Tea', 22.99, 'Health beneficial')">🛒<span style="font-size: 20px;">+</span></button>
                </div>
                
                <div class="product-card">
                    <div class="product-image-container">
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 200 150'%3E%3Crect fill='%23f1c40f' width='90' height='110' x='55' y='20' rx='8'/%3E%3Ccircle cx='70' cy='35' r='8' fill='%23e74c3c'/%3E%3Ccircle cx='130' cy='45' r='10' fill='%23e74c3c'/%3E%3Ccircle cx='75' cy='55' r='6' fill='%23e74c3c'/%3E%3Cellipse cx='105' cy='65' rx='18' ry='25' fill='%2395e06c' transform='rotate(-25 105 65)'/%3E%3Cellipse cx='120' cy='80' rx='12' ry='18' fill='%2395e06c' transform='rotate(15 120 80)'/%3E%3Ctext x='100' y='100' font-family='Arial' font-size='16' font-weight='bold' fill='%232d5f1e' text-anchor='middle'%3EMELON%3C/text%3E%3Ctext x='100' y='115' font-family='Arial' font-size='12' fill='%232d5f1e' text-anchor='middle'%3EREFRESHER%3C/text%3E%3C/svg%3E" alt="Melon Refresher">
                    </div>
                    <div class="product-info">
                        <h3>Melon Refresher</h3>
                        <p>free of sugar</p>
                        <div class="product-price">price: 25.99 AED</div>
                        <div class="product-details-icon">📋</div>
                    </div>
                    <button class="add-to-cart-btn" onclick="addToCart('Melon Refresher', 25.99, 'free of sugar')">🛒<span style="font-size: 20px;">+</span></button>
                </div>
            </div>
        </div>

        <!-- Cart Screen -->
        <div id="cart" class="screen">
            <div class="header">
                <button class="back-btn" onclick="showScreen('products')">←</button>
                <h1>Cart</h1>
                <div style="width: 36px;"></div>
            </div>
            <div class="cart-items" id="cartItems">
                <p style="text-align: center; padding: 40px; color: #999;">Your cart is empty</p>
            </div>
            <div class="cart-total">
                <h3>Total: <span id="cartTotal">0.00</span> AED</h3>
            </div>
            <button class="checkout-btn" onclick="checkout()">Checkout</button>
        </div>

        <!-- Profile Screen -->
        <div id="profile" class="screen">
            <div class="profile-header">
                <div class="profile-avatar">👤</div>
                <h2>Profile</h2>
                <button style="background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%); border: none; color: white; padding: 8px 20px; border-radius: 15px; margin-top: 10px; cursor: pointer; font-weight: 600; box-shadow: 0 4px 10px rgba(34, 197, 94, 0.3);">Edit</button>
            </div>
            <div class="profile-content">
                <div class="profile-field">
                    <label>Name</label>
                    <input type="text" value="John Doe" readonly>
                </div>
                <div class="profile-field">
                    <label>Gender</label>
                    <input type="text" value="Male" readonly>
                </div>
                <div class="profile-field">
                    <label>Member since</label>
                    <input type="text" value="August 2024" readonly>
                </div>
                <div class="profile-field">
                    <label>Birthday</label>
                    <input type="text" value="January 1, 1990" readonly>
                </div>
                <div class="profile-field">
                    <label>Height</label>
                    <input type="text" value="175 cm" readonly>
                </div>
                <div class="profile-field">
                    <label>Weight</label>
                    <input type="text" value="70 kg" readonly>
                </div>
            </div>
        </div>

        <!-- Settings Screen -->
        <div id="settings" class="screen">
            <div class="settings-container">
                <div class="header" style="background: linear-gradient(135deg, #0a0a0a 0%, #22c55e 100%);">
                    <button class="back-btn" onclick="showScreen('home')">←</button>
                    <h1>Settings</h1>
                    <div style="width: 36px;"></div>
                </div>
                <div class="settings-list">
                    <div class="settings-item" onclick="showScreen('account')">
                        <span>My Account</span>
                        <span class="arrow">→</span>
                    </div>
                    <div class="settings-item" onclick="showScreen('membership')">
                        <span>Membership Services</span>
                        <span class="arrow">→</span>
                    </div>
                    <div class="settings-item" onclick="showScreen('appSettings')">
                        <span>App Settings</span>
                        <span class="arrow">→</span>
                    </div>
                    <div class="settings-item danger" onclick="alert('Logged out')">
                        <span>Log out</span>
                    </div>
                    <div class="settings-item danger" onclick="alert('Account deleted')">
                        <span>Delete Account</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Account Screen -->
        <div id="account" class="screen">
            <div class="account-container">
                <div class="header" style="background: linear-gradient(135deg, #0a0a0a 0%, #22c55e 100%);">
                    <button class="back-btn" onclick="showScreen('settings')">←</button>
                    <h1>My Account</h1>
                    <div style="width: 36px;"></div>
                </div>
                <div class="account-content">
                    <div class="account-field">
                        <label>Email</label>
                        <input type="email" value="johndoe@example.com" readonly>
                    </div>
                    <div class="account-field">
                        <label>Password</label>
                        <input type="password" value="********" readonly>
                    </div>
                    <div class="account-field">
                        <label>Phone Number</label>
                        <input type="tel" value="+971 50 123 4567" readonly>
                    </div>
                </div>
            </div>
        </div>

        <!-- Membership Screen -->
        <div id="membership" class="screen">
            <div class="header">
                <button class="back-btn" onclick="showScreen('settings')">←</button>
                <h1>Membership</h1>
                <div style="width: 36px;"></div>
            </div>
            <div class="membership-card">
                <h3>Your Membership</h3>
                <div class="membership-price">877 AED/yr</div>
                <p>Plus tax</p>
                <div class="membership-details">
                    <div class="membership-detail">
                        <span>Billed</span>
                        <strong>Annually</strong>
                    </div>
                    <div class="membership-detail">
                        <span>Savings</span>
                        <strong>33%</strong>
                    </div>
                    <div class="membership-detail">
                        <span>Next Renewal</span>
                        <strong>April 23, 2026</strong>
                    </div>
                </div>
                <button style="width: 100%; margin-top: 20px; padding: 12px; background: rgba(255,255,255,0.2); border: 1px solid white; color: white; border-radius: 20px; cursor: pointer;">Cancel Membership</button>
            </div>
            <div class="settings-list">
                <div class="settings-item">
                    <span>Payment Method</span>
                    <span class="arrow">→</span>
                </div>
                <div class="settings-item">
                    <span>Redeem Membership Code</span>
                    <span class="arrow">→</span>
                </div>
            </div>
        </div>

        <!-- App Settings Screen -->
        <div id="appSettings" class="screen">
            <div class="app-settings-container">
                <div class="header" style="background: linear-gradient(135deg, #0a0a0a 0%, #22c55e 100%);">
                    <button class="back-btn" onclick="showScreen('settings')">←</button>
                    <h1>App Settings</h1>
                    <div style="width: 36px;"></div>
                </div>
                <div class="settings-list">
                    <div class="settings-item">
                        <span>Camera</span>
                        <span class="arrow">→</span>
                    </div>
                    <div class="settings-item">
                        <span>Location</span>
                        <span class="arrow">→</span>
                    </div>
                    <div class="settings-item">
                        <span>Notification</span>
                        <span class="arrow">→</span>
                    </div>
                    <div class="settings-item">
                        <span>Language</span>
                        <span class="arrow">→</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Coupons Screen -->
        <div id="coupons" class="screen">
            <div class="header" style="background: linear-gradient(135deg, #0a0a0a 0%, #22c55e 100%);">
                <button class="back-btn" onclick="showScreen('home')">←</button>
                <h1>Coupons</h1>
                <div style="width: 36px;"></div>
            </div>
            <div class="coupons-container">
                <div class="points-balance">
                    <h3>Points Balance</h3>
                    <div class="points-value">174</div>
                    <p style="font-size: 14px; opacity: 0.9;">45% of next reward</p>
                </div>
                <h3 class="coupons-title">🎫 Available Offers</h3>
                <div class="coupon-card">
                    <div>
                        <div class="coupon-discount">15.0% off</div>
                        <p style="font-size: 12px; margin-top: 5px;">Get 15% off at checkout when you buy 10 drinks</p>
                    </div>
                    <button class="apply-btn">Apply</button>
                </div>
                <div class="coupon-card">
                    <div>
                        <div class="coupon-discount">20.0% off</div>
                        <p style="font-size: 12px; margin-top: 5px;">Enjoy 20% off your entire order when you spend 300 AED or more</p>
                    </div>
                    <button class="apply-btn">Apply</button>
                </div>
                <div class="coupon-card">
                    <div>
                        <div class="coupon-discount">Free Shipping</div>
                        <p style="font-size: 12px; margin-top: 5px;">Get free shipping on all orders over 150 AED</p>
                    </div>
                    <button class="apply-btn">Apply</button>
                </div>
            </div>
        </div>

        <!-- Blood Pressure Screen -->
        <div id="bloodPressure" class="screen">
            <div class="bp-container">
                <div class="header" style="background: transparent;">
                    <button class="back-btn" onclick="showScreen('home')">←</button>
                    <h1>Blood Pressure Insights</h1>
                    <div style="width: 36px;"></div>
                </div>
                
                <div class="bp-header-icon">
                    <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="50" cy="65" r="20" fill="#0a1628" stroke="white" stroke-width="2"/>
                        <path d="M50,30 Q35,45 50,65 Q65,45 50,30 Z" fill="#e74c3c"/>
                        <path d="M35,50 L45,50 L50,40 L55,60 L60,50 L70,50" stroke="white" stroke-width="2" fill="none"/>
                        <ellipse cx="45" cy="75" rx="8" ry="4" fill="#764ba2"/>
                        <path d="M45,75 Q50,85 58,82" stroke="#764ba2" stroke-width="2" fill="none"/>
                    </svg>
                </div>
                
                <div class="bp-display">
                    <p class="bp-description">
                        Wear your device to begin measuring blood pressure. Readings will appear as points on a scatter plot, helping you monitor trends and gain insights into your cardiovascular health over time.
                        <span class="bp-info-icon">i</span>
                    </p>
                </div>
                
                <div class="scatter-plot-container">
                    <div class="scatter-plot" id="bpScatterPlot">
                        <!-- Grid lines will be added by JavaScript -->
                    </div>
                </div>

                <div class="bp-input-container">
                    <div class="bp-input-label">Enter Blood Pressure Reading</div>
                    <div class="bp-input-wrapper">
                        <input type="text" class="bp-input" id="bpInput" placeholder="e.g., 120/80">
                        <button class="bp-set-btn" onclick="addBPReading()">Add Reading</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sleep Performance Screen -->
        <div id="sleep" class="screen">
            <div class="sleep-container">
                <div class="header" style="background: linear-gradient(135deg, #0a0a0a 0%, #22c55e 100%);">
                    <button class="back-btn" onclick="showScreen('home')">←</button>
                    <h1 style="color: white;">Sleep Performance</h1>
                    <div style="width: 36px;"></div>
                </div>
                
                <div class="sleep-header-icon">
                    <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="50" cy="50" r="35" fill="#22c55e" opacity="0.9"/>
                        <path d="M50,20 A30,30 0 0,1 70,50 A25,25 0 0,0 50,30 A25,25 0 0,0 30,50 A30,30 0 0,1 50,20 Z" fill="#0a0a0a"/>
                        <circle cx="45" cy="45" r="3" fill="#22c55e"/>
                        <circle cx="60" cy="50" r="2" fill="#22c55e"/>
                        <text x="75" y="30" font-family="Arial" font-size="16" fill="#22c55e" font-weight="bold">Z</text>
                        <text x="82" y="22" font-family="Arial" font-size="12" fill="#22c55e" font-weight="bold">Z</text>
                    </svg>
                </div>
                
                <div class="sleep-main-card">
                    <div class="sleep-title-section">
                        <h2>Last Night's Sleep</h2>
                        <p>Sleep quality analysis from your device</p>
                    </div>
                    
                    <div class="sleep-time-display">
                        <div class="sleep-time-large" id="sleepHoursDisplay">8:54</div>
                        <div class="sleep-time-label">Total Sleep Time</div>
                        <div class="sleep-controls">
                            <button class="sleep-control-btn" onclick="adjustSleep(-15)">−</button>
                            <button class="sleep-control-btn" onclick="adjustSleep(15)">+</button>
                        </div>
                    </div>
                    
                    <div class="sleep-quality-indicator">
                        <div class="quality-badge">Excellent Sleep</div>
                        <div class="quality-stars">⭐⭐⭐⭐⭐</div>
                    </div>
                    
                    <div class="sleep-chart-wrapper">
                        <h3 style="text-align: center; color: #333; margin-bottom: 20px; font-size: 18px;">Sleep Stages Breakdown</h3>
                        <div class="sleep-pie-chart">
                            <canvas id="sleepPieChartNew"></canvas>
                        </div>
                        
                        <div class="sleep-stages-list">
                            <div class="sleep-stage-item">
                                <div class="sleep-stage-color" style="background: #a8b5e6;"></div>
                                <h4>Light Sleep</h4>
                                <div class="percentage">50%</div>
                                <div class="duration">4h 27m</div>
                            </div>
                            <div class="sleep-stage-item">
                                <div class="sleep-stage-color" style="background: #e64db8;"></div>
                                <h4>Deep Sleep</h4>
                                <div class="percentage">21%</div>
                                <div class="duration">1h 52m</div>
                            </div>
                            <div class="sleep-stage-item">
                                <div class="sleep-stage-color" style="background: #9b7bb5;"></div>
                                <h4>REM Sleep</h4>
                                <div class="percentage">24%</div>
                                <div class="duration">2h 8m</div>
                            </div>
                            <div class="sleep-stage-item">
                                <div class="sleep-stage-color" style="background: #e8e8e8;"></div>
                                <h4>Awake</h4>
                                <div class="percentage">5%</div>
                                <div class="duration">27m</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="sleep-tips">
                        <h3>💡 Sleep Tips for Better Rest</h3>
                        <ul>
                            <li>Maintain consistent sleep schedule</li>
                            <li>Keep bedroom cool and dark</li>
                            <li>Avoid screens 1 hour before bed</li>
                            <li>Limit caffeine after 2 PM</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Stress Monitor Screen -->
        <div id="stress" class="screen">
            <div class="stress-container">
                <div class="header" style="background: transparent;">
                    <button class="back-btn" onclick="showScreen('home')">←</button>
                    <h1>Stress Monitor</h1>
                    <div style="width: 36px;"></div>
                </div>
                
                <div class="stress-header-icon">
                    <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                        <ellipse cx="50" cy="60" rx="30" ry="35" fill="#0a1628"/>
                        <path d="M35,45 Q30,35 35,30 M65,45 Q70,35 65,30" stroke="#0a1628" stroke-width="3" fill="none"/>
                        <path d="M30,55 Q50,45 70,55" stroke="white" stroke-width="2" fill="none"/>
                        <circle cx="40" cy="45" r="3" fill="white"/>
                        <circle cx="60" cy="45" r="3" fill="white"/>
                        <path d="M40,25 L35,15 M50,22 L50,10 M60,25 L65,15" stroke="#0a1628" stroke-width="3"/>
                    </svg>
                </div>
                
                <div class="stress-description">
                    Stress is the body's natural response to a physical or mental challenge. It's a measure of how alert or activated your body is at any given time.
                    <span class="stress-info-icon">i</span>
                </div>
                
                <div class="stress-gauge-container">
                    <div class="stress-gauge-inner">
                        <div class="stress-score-display" id="stressScoreValue">1.0</div>
                        
                        <div class="stress-gauge">
                            <canvas id="stressGaugeCanvas"></canvas>
                        </div>
                        <div style="text-align: center;">
                            <div class="stress-level-badge" id="stressLevelLabel">Medium</div>
                            <div class="stress-controls">
                                <button class="stress-control-btn" onclick="adjustStress(-0.1)">−</button>
                                <button class="stress-control-btn" onclick="adjustStress(0.1)">+</button>
                            </div>
                            <div class="stress-input-container">
                                <input type="number" class="stress-input" id="stressInput" placeholder="0.0-3.0" step="0.1" min="0" max="3">
                                <button class="stress-set-btn" onclick="setStressFromInput()">Set</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="stress-legend">
                        <h3>Stress Score</h3>
                        <div class="stress-legend-item low">
                            <div class="title">0.0-0.9-low</div>
                            <div class="description">You may be feeling calm relaxed or sleepy.</div>
                        </div>
                        <div class="stress-legend-item medium">
                            <div class="title">1.0-1.9-medium</div>
                            <div class="description">You may be feeling neutral alert or mildly activated.</div>
                        </div>
                        <div class="stress-legend-item high">
                            <div class="title">2.0-3.0-high</div>
                            <div class="description">You may be feeling excited stressed or highly activated.</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Calendar Screen -->
        <div id="calendar" class="screen">
            <div class="header">
                <button class="back-btn" onclick="showScreen('home')">←</button>
                <h1>Health Calendar</h1>
                <div style="width: 36px;"></div>
            </div>
            <div class="calendar-container">
                <div class="calendar-header">
                    <button style="background: none; border: none; font-size: 24px; cursor: pointer;" onclick="changeMonth(-1)">←</button>
                    <h2 id="calendarMonth">May 2026</h2>
                    <button style="background: none; border: none; font-size: 24px; cursor: pointer;" onclick="changeMonth(1)">→</button>
                </div>
                <div class="calendar-grid" id="calendarGrid">
                    <div class="calendar-day" onclick="showDayDetails(1, false)">1</div>
                    <div class="calendar-day today" onclick="showDayDetails(2, true)">2</div>
                    <div class="calendar-day" onclick="showDayDetails(3, false)">3</div>
                    <div class="calendar-day has-event" onclick="showDayDetails(4, false, true)">4</div>
                    <div class="calendar-day" onclick="showDayDetails(5, false)">5</div>
                    <div class="calendar-day" onclick="showDayDetails(6, false)">6</div>
                    <div class="calendar-day" onclick="showDayDetails(7, false)">7</div>
                    <div class="calendar-day has-event" onclick="showDayDetails(8, false, true)">8</div>
                    <div class="calendar-day" onclick="showDayDetails(9, false)">9</div>
                    <div class="calendar-day" onclick="showDayDetails(10, false)">10</div>
                    <div class="calendar-day" onclick="showDayDetails(11, false)">11</div>
                    <div class="calendar-day" onclick="showDayDetails(12, false)">12</div>
                    <div class="calendar-day" onclick="showDayDetails(13, false)">13</div>
                    <div class="calendar-day" onclick="showDayDetails(14, false)">14</div>
                    <div class="calendar-day has-event" onclick="showDayDetails(15, false, true)">15</div>
                    <div class="calendar-day" onclick="showDayDetails(16, false)">16</div>
                    <div class="calendar-day" onclick="showDayDetails(17, false)">17</div>
                    <div class="calendar-day" onclick="showDayDetails(18, false)">18</div>
                    <div class="calendar-day" onclick="showDayDetails(19, false)">19</div>
                    <div class="calendar-day" onclick="showDayDetails(20, false)">20</div>
                    <div class="calendar-day" onclick="showDayDetails(21, false)">21</div>
                    <div class="calendar-day has-event" onclick="showDayDetails(22, false, true)">22</div>
                    <div class="calendar-day" onclick="showDayDetails(23, false)">23</div>
                    <div class="calendar-day" onclick="showDayDetails(24, false)">24</div>
                </div>
                <div style="margin-top: 20px; padding: 20px; background: white; border-radius: 15px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                    <h3 style="margin-bottom: 10px;">Event Reminder</h3>
                    <p style="color: #666;" id="eventReminder">Click on a date to view details</p>
                </div>
            </div>
        </div>

        <!-- Chat Screen -->
        <div id="chat" class="screen">
            <div class="header" style="background: linear-gradient(135deg, #1a5f0f 0%, #0a1628 100%);">
                <button class="back-btn" onclick="showScreen('home')">←</button>
                <h1>Health Assistant</h1>
                <div style="width: 36px;"></div>
            </div>
            <div class="chat-container">
                <div class="chat-messages" id="chatMessages">
                    <div class="chat-message bot">
                        <div class="chat-avatar">🤖</div>
                        <div>
                            <div class="chat-bubble">
                                Hello! I'm your Health Assistant. How can I help you today?
                            </div>
                            <div class="quick-replies">
                                <button class="quick-reply-btn" onclick="sendQuickReply('Heart rate info')">❤️ Heart Rate</button>
                                <button class="quick-reply-btn" onclick="sendQuickReply('Sleep tips')">😴 Sleep Tips</button>
                                <button class="quick-reply-btn" onclick="sendQuickReply('Stress management')">😌 Stress Help</button>
                                <button class="quick-reply-btn" onclick="sendQuickReply('Nutrition advice')">🥗 Nutrition</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="chat-input-container">
                    <input type="text" class="chat-input" id="chatInput" placeholder="Ask about your health..." onkeypress="handleChatKeyPress(event)">
                    <button class="chat-send-btn" onclick="sendMessage()">➤</button>
                </div>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <div class="bottom-nav">
            <div class="nav-item active" onclick="showScreen('home')">
                <div class="nav-icon">🏠</div>
                <div class="nav-label">Home</div>
            </div>
            <div class="nav-item" onclick="showScreen('chat')">
                <div class="nav-icon">💬</div>
                <div class="nav-label">Chat</div>
            </div>
            <div class="nav-item" onclick="showScreen('coupons')">
                <div class="nav-icon">🎫</div>
                <div class="nav-label">Coupons</div>
            </div>
            <div class="nav-item" onclick="showScreen('profile')">
                <div class="nav-icon">👤</div>
                <div class="nav-label">Profile</div>
            </div>
            <div class="nav-item" onclick="showScreen('settings')">
                <div class="nav-icon">⚙️</div>
                <div class="nav-label">Settings</div>
            </div>
        </div>
    </div>

    <script>
        let cart = [];
        let healthPoints = 174;
        let currentHeartRate = 87;
        let currentStressLevel = 1.0;
        let currentSleepMinutes = 534; // 8:54 = 534 minutes
        let currentBPReading = { reading: '120/80', date: 'Today', x: 50, y: 40 }; // Store single BP reading
        let pointsHistory = [
            { activity: 'Good Sleep (8h 54m)', points: 15, time: 'Today' },
            { activity: 'Stay Hydrated', points: 10, time: 'Today' },
            { activity: 'Complete Workout', points: 20, time: 'Yesterday' }
        ];

        // Heart Rate Controls
        function adjustHeartRate(change) {
            currentHeartRate += change;
            if (currentHeartRate < 40) currentHeartRate = 40;
            if (currentHeartRate > 200) currentHeartRate = 200;
            updateHeartRateDisplay();
            updateHeartRateChart();
        }

        function resetHeartRate() {
            currentHeartRate = 87;
            updateHeartRateDisplay();
            updateHeartRateChart();
        }

        function updateHeartRateDisplay() {
            document.getElementById('heartRateValue').textContent = currentHeartRate;
            const homeDisplay = document.querySelector('.home-card p[style*="24px"]');
            if (homeDisplay) {
                homeDisplay.innerHTML = `<span style="font-size: 24px; color: white; font-weight: bold;">${currentHeartRate} BPM</span>`;
            }
        }

        function updateHeartRateChart() {
            const chartLine = document.getElementById('heartRateLine');
            if (!chartLine) return;
            
            // Y-axis range: 60-160 BPM
            // Chart height: 0-100 (viewBox units)
            // Convert BPM to Y coordinate (inverted because SVG Y goes down)
            const minBPM = 60;
            const maxBPM = 160;
            const chartHeight = 100;
            
            const baseY = ((maxBPM - currentHeartRate) / (maxBPM - minBPM)) * chartHeight;
            
            // Generate new data points based on current heart rate with natural variation
            const variation = 8; // ±8 BPM variation
            
            const points = [];
            for (let i = 0; i <= 5; i++) {
                const x = i * 100;
                const randomVariation = (Math.random() - 0.5) * variation;
                const bpmValue = currentHeartRate + randomVariation;
                const clampedBPM = Math.max(minBPM, Math.min(maxBPM, bpmValue));
                const y = ((maxBPM - clampedBPM) / (maxBPM - minBPM)) * chartHeight;
                points.push(`${x},${y}`);
            }
            
            chartLine.setAttribute('points', points.join(' '));
            
            // Update circles
            const circles = document.querySelectorAll('.hr-point');
            points.forEach((point, index) => {
                if (circles[index]) {
                    const [x, y] = point.split(',');
                    circles[index].setAttribute('cx', x);
                    circles[index].setAttribute('cy', y);
                }
            });
        }

        function setHeartRateFromInput() {
            const input = document.getElementById('bpmInput');
            const value = parseInt(input.value);
            
            if (isNaN(value)) {
                alert('Please enter a valid number');
                return;
            }
            
            if (value < 40 || value > 200) {
                alert('Please enter a value between 40 and 200 BPM');
                return;
            }
            
            currentHeartRate = value;
            updateHeartRateDisplay();
            updateHeartRateChart();
            input.value = '';
        }

        // Sleep Controls
        function adjustSleep(minutes) {
            currentSleepMinutes += minutes;
            if (currentSleepMinutes < 0) currentSleepMinutes = 0;
            if (currentSleepMinutes > 720) currentSleepMinutes = 720; // Max 12 hours
            updateSleepDisplay();
        }

        function updateSleepDisplay() {
            const hours = Math.floor(currentSleepMinutes / 60);
            const minutes = currentSleepMinutes % 60;
            const timeString = `${hours}:${minutes.toString().padStart(2, '0')}`;
            document.getElementById('sleepHoursDisplay').textContent = timeString;
        }

        // Stress Controls
        function adjustStress(change) {
            currentStressLevel += change;
            if (currentStressLevel < 0) currentStressLevel = 0;
            if (currentStressLevel > 3) currentStressLevel = 3;
            currentStressLevel = Math.round(currentStressLevel * 10) / 10; // Round to 1 decimal
            updateStressDisplay();
        }

        function updateStressDisplay() {
            document.getElementById('stressScoreValue').textContent = currentStressLevel.toFixed(1);
            
            let level = '';
            let color = '';
            if (currentStressLevel < 1.0) {
                level = 'Low';
                color = '#3b82f6'; // Blue
            } else if (currentStressLevel < 2.0) {
                level = 'Medium';
                color = '#1e40af'; // Dark blue
            } else {
                level = 'High';
                color = '#dc2626'; // Red
            }
            
            const badge = document.getElementById('stressLevelLabel');
            badge.textContent = level;
            badge.style.color = color;
            
            // Redraw gauge
            initStressGauge();
        }

        function setStressFromInput() {
            const input = document.getElementById('stressInput');
            const value = parseFloat(input.value);
            
            if (isNaN(value)) {
                alert('Please enter a valid number');
                return;
            }
            
            if (value < 0 || value > 3) {
                alert('Please enter a value between 0.0 and 3.0');
                return;
            }
            
            currentStressLevel = Math.round(value * 10) / 10;
            updateStressDisplay();
            input.value = '';
        }

        // Points functionality
        function completeActivity(activityType, points) {
            const activities = {
                'workout': '💪 Complete Workout',
                'sleep': '😴 Good Sleep',
                'water': '💧 Stay Hydrated',
                'meditation': '🧘 Meditation',
                'steps': '🚶 Daily Steps',
                'healthymeal': '🥗 Healthy Meal'
            };
            
            const confirmed = confirm(`Complete "${activities[activityType]}"?\n\nYou will earn +${points} points!`);
            
            if (confirmed) {
                healthPoints += points;
                updatePointsDisplay();
                
                // Add to history
                pointsHistory.unshift({
                    activity: activities[activityType],
                    points: points,
                    time: 'Just now'
                });
                
                updatePointsHistory();
                
                alert(`🎉 Congratulations!\n\nYou earned ${points} points!\nTotal Points: ${healthPoints}`);
            }
        }

        function showAddPointsMenu() {
            alert('💡 Tip: Complete health activities below to earn points!\n\nPoints can be redeemed for:\n• Product discounts\n• Premium features\n• Health rewards\n\nClick on any activity to start earning!');
        }

        function updatePointsDisplay() {
            document.getElementById('totalPoints').textContent = healthPoints;
            document.getElementById('homePointsDisplay').textContent = healthPoints;
        }

        function updatePointsHistory() {
            const historyContainer = document.getElementById('pointsHistory');
            let html = '';
            
            pointsHistory.slice(0, 5).forEach(item => {
                html += `
                    <div class="history-item">
                        <span class="history-activity">${item.activity}</span>
                        <span class="history-points">+${item.points}</span>
                    </div>
                `;
            });
            
            historyContainer.innerHTML = html;
        }

        // Calendar functionality - Define globally
        const healthEvents = {
            4: { type: 'Workout', description: 'Morning yoga session - 30 minutes', icon: '🧘' },
            8: { type: 'Checkup', description: 'Doctor appointment at 10:00 AM', icon: '👨‍⚕️' },
            15: { type: 'Medication', description: 'Refill prescription reminder', icon: '💊' },
            22: { type: 'Exercise', description: 'Gym session - Cardio day', icon: '🏃' }
        };

        function showDayDetails(day, isToday, hasEvent) {
            const monthName = document.getElementById('calendarMonth').textContent;
            let message = `📅 ${monthName} ${day}\n\n`;
            
            if (isToday) {
                message += '🌟 TODAY\n\n';
            }
            
            if (hasEvent && healthEvents[day]) {
                const event = healthEvents[day];
                message += `${event.icon} ${event.type}\n${event.description}\n\n`;
                message += '✅ Would you like to set a reminder?';
            } else {
                message += 'Health Summary:\n';
                message += `• Heart Rate: 87 BPM\n`;
                message += `• Sleep: 8:54 hours\n`;
                message += `• Stress Level: Medium\n\n`;
                message += 'No scheduled events for this day.';
            }
            
            alert(message);
            
            // Update event reminder section
            const reminderEl = document.getElementById('eventReminder');
            if (hasEvent && healthEvents[day]) {
                const event = healthEvents[day];
                reminderEl.innerHTML = `<strong>${event.icon} ${event.type} - ${monthName} ${day}</strong><br>${event.description}`;
            } else {
                reminderEl.textContent = `Selected: ${monthName} ${day} - No events scheduled`;
            }
        }

        function changeMonth(direction) {
            const months = ['January', 'February', 'March', 'April', 'May', 'June', 
                          'July', 'August', 'September', 'October', 'November', 'December'];
            const currentMonth = document.getElementById('calendarMonth').textContent;
            const [monthName, year] = currentMonth.split(' ');
            let monthIndex = months.indexOf(monthName);
            let currentYear = parseInt(year);
            
            monthIndex += direction;
            
            if (monthIndex < 0) {
                monthIndex = 11;
                currentYear--;
            } else if (monthIndex > 11) {
                monthIndex = 0;
                currentYear++;
            }
            
            document.getElementById('calendarMonth').textContent = `${months[monthIndex]} ${currentYear}`;
            document.getElementById('eventReminder').textContent = 'Click on a date to view details';
        }

        function showScreen(screenId) {
            const screens = document.querySelectorAll('.screen');
            screens.forEach(screen => screen.classList.remove('active'));
            document.getElementById(screenId).classList.add('active');
            
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => item.classList.remove('active'));
            
            // Show congratulations flash when entering coupons screen
            if (screenId === 'coupons') {
                showCongratsFlash();
            }
        }

        function showCongratsFlash() {
            // Create flash message
            const flash = document.createElement('div');
            flash.className = 'congrats-flash';
            flash.textContent = 'Congrats here is your points!';
            document.body.appendChild(flash);
            
            // Remove after 1 second
            setTimeout(() => {
                flash.remove();
            }, 1000);
        }

        function addToCart(name, price, description) {
            cart.push({ name, price, description });
            updateCart();
            showScreen('cart');
        }

        function removeFromCart(index) {
            cart.splice(index, 1);
            updateCart();
        }

        function updateCart() {
            const cartItems = document.getElementById('cartItems');
            const cartTotal = document.getElementById('cartTotal');
            
            if (cart.length === 0) {
                cartItems.innerHTML = '<p style="text-align: center; padding: 40px; color: #999;">Your cart is empty</p>';
                cartTotal.textContent = '0.00';
                return;
            }
            
            let html = '';
            let total = 0;
            
            cart.forEach((item, index) => {
                total += item.price;
                html += `
                    <div class="cart-item">
                        <div>
                            <h3 style="font-size: 18px; margin-bottom: 5px;">${item.name}</h3>
                            <p style="font-size: 14px; color: #666;">${item.description}</p>
                            <p style="font-size: 16px; color: #667eea; font-weight: bold; margin-top: 5px;">${item.price.toFixed(2)} AED</p>
                        </div>
                        <button class="remove-btn" onclick="removeFromCart(${index})">Remove</button>
                    </div>
                `;
            });
            
            cartItems.innerHTML = html;
            cartTotal.textContent = total.toFixed(2);
        }

        function checkout() {
            if (cart.length === 0) {
                alert('Your cart is empty!');
                return;
            }
            alert('Checkout successful! Total: ' + document.getElementById('cartTotal').textContent + ' AED');
            cart = [];
            updateCart();
        }

        // Chat functionality
        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (message === '') return;
            
            addChatMessage(message, 'user');
            input.value = '';
            
            setTimeout(() => {
                const response = getBotResponse(message);
                addChatMessage(response, 'bot');
            }, 500);
        }

        function sendQuickReply(message) {
            addChatMessage(message, 'user');
            
            setTimeout(() => {
                const response = getBotResponse(message);
                addChatMessage(response, 'bot');
            }, 500);
        }

        function addChatMessage(text, sender) {
            const messagesContainer = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `chat-message ${sender}`;
            
            const avatar = sender === 'bot' ? '🤖' : '👤';
            
            messageDiv.innerHTML = `
                <div class="chat-avatar">${avatar}</div>
                <div class="chat-bubble">${text}</div>
            `;
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function getBotResponse(message) {
            const lowerMessage = message.toLowerCase();
            
            // Convert sleep minutes to hours and minutes format
            const sleepHours = Math.floor(currentSleepMinutes / 60);
            const sleepMins = currentSleepMinutes % 60;
            const sleepTime = `${sleepHours}:${sleepMins.toString().padStart(2, '0')}`;
            
            // Determine stress level name
            let stressLevelName = '';
            if (currentStressLevel < 1.0) {
                stressLevelName = 'Low';
            } else if (currentStressLevel < 2.0) {
                stressLevelName = 'Medium';
            } else {
                stressLevelName = 'High';
            }
            
            if (lowerMessage.includes('heart') || lowerMessage.includes('bpm') || lowerMessage.includes('pulse')) {
                let hrAdvice = '';
                if (currentHeartRate < 60) {
                    hrAdvice = "Your heart rate is below the normal resting range. This could indicate excellent cardiovascular fitness, but if you're not an athlete, consider consulting a doctor.";
                } else if (currentHeartRate <= 100) {
                    hrAdvice = "Your heart rate is within the normal resting range. Keep up the healthy lifestyle!";
                } else if (currentHeartRate <= 120) {
                    hrAdvice = "Your heart rate is slightly elevated. This is normal after exercise, but if you're resting, consider some relaxation techniques.";
                } else {
                    hrAdvice = "Your heart rate is quite high. If you're not exercising, please ensure you're hydrating and relaxing. Consider consulting a healthcare professional if this persists.";
                }
                return `Your current heart rate is ${currentHeartRate} BPM. ${hrAdvice} Would you like tips on maintaining a healthy heart rate?`;
                
            } else if (lowerMessage.includes('sleep')) {
                let sleepAdvice = '';
                const totalSleepHours = currentSleepMinutes / 60;
                if (totalSleepHours < 6) {
                    sleepAdvice = "You're not getting enough sleep! Adults need 7-9 hours for optimal health. Try going to bed earlier tonight.";
                } else if (totalSleepHours <= 9) {
                    sleepAdvice = "That's a healthy amount of sleep! You're giving your body the rest it needs.";
                } else {
                    sleepAdvice = "You're sleeping quite a lot. While rest is important, oversleeping can sometimes indicate other health issues. Aim for 7-9 hours.";
                }
                return `Your last sleep session was ${sleepTime} hours. ${sleepAdvice} Getting quality sleep is crucial for recovery and energy levels. Would you like tips for better sleep?`;
                
            } else if (lowerMessage.includes('stress')) {
                let stressAdvice = '';
                if (currentStressLevel < 1.0) {
                    stressAdvice = "Great job staying calm! Keep up your stress management practices.";
                } else if (currentStressLevel < 2.0) {
                    stressAdvice = "Your stress is at a moderate level. Try some breathing exercises or take a short break.";
                } else {
                    stressAdvice = "Your stress level is high. Please take time to relax. Try deep breathing, meditation, or talking to someone you trust.";
                }
                return `Your current stress level is ${currentStressLevel.toFixed(1)} (${stressLevelName}). ${stressAdvice} Would you like me to guide you through a quick relaxation exercise?`;
                
            } else if (lowerMessage.includes('health') || lowerMessage.includes('summary') || lowerMessage.includes('status')) {
                return `📊 Your Health Summary:\n\n❤️ Heart Rate: ${currentHeartRate} BPM\n😴 Sleep: ${sleepTime} hours\n😌 Stress Level: ${currentStressLevel.toFixed(1)} (${stressLevelName})\n\nOverall, ${currentHeartRate <= 100 && currentStressLevel < 2.0 && currentSleepMinutes >= 360 ? "you're doing great! Keep it up!" : "there's room for improvement. Let me know if you need specific advice on any metric!"}`;
                
            } else if (lowerMessage.includes('nutrition') || lowerMessage.includes('diet') || lowerMessage.includes('food')) {
                return `Good nutrition is essential for overall health. Focus on: eating plenty of fruits and vegetables, staying hydrated with water, choosing whole grains, limiting processed foods, and maintaining balanced meals. Check out our Products section for healthy drink options!\n\n💡 Based on your current heart rate of ${currentHeartRate} BPM, ${currentHeartRate > 100 ? "avoid caffeine and stimulants." : "you can maintain your current diet."}`;
                
            } else if (lowerMessage.includes('blood pressure') || lowerMessage.includes('bp')) {
                return "Your blood pressure reading is 120/80 mmHg, which is considered normal. Maintain this by: reducing sodium intake, regular exercise, maintaining healthy weight, limiting alcohol, and managing stress. Regular monitoring is important!";
                
            } else if (lowerMessage.includes('exercise') || lowerMessage.includes('workout')) {
                let exerciseAdvice = '';
                if (currentHeartRate < 70) {
                    exerciseAdvice = "Your low resting heart rate suggests good fitness. You can handle moderate to intense workouts.";
                } else if (currentHeartRate > 90) {
                    exerciseAdvice = "Your elevated heart rate suggests starting with light exercise and gradually building intensity.";
                } else {
                    exerciseAdvice = "Your heart rate is in a good range for starting moderate exercise.";
                }
                return `Regular exercise is vital for health! Adults should aim for: 150 minutes of moderate aerobic activity per week, strength training 2+ days a week, and daily stretching. ${exerciseAdvice} Always consult your doctor before starting a new exercise program.`;
                
            } else if (lowerMessage.includes('water') || lowerMessage.includes('hydration')) {
                return "Staying hydrated is crucial! Aim to drink 8-10 glasses (about 2 liters) of water daily. Signs of good hydration: clear or light yellow urine, moist lips, and feeling energized. Increase intake during exercise or hot weather.";
                
            } else {
                return `I'm here to help with your health questions! You can ask me about:\n\n❤️ Heart rate (currently ${currentHeartRate} BPM)\n😴 Sleep (last session: ${sleepTime})\n😌 Stress (currently ${stressLevelName})\n💪 Exercise, nutrition, or general wellness\n\nHow can I assist you today?`;
            }
        }

        function handleChatKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        window.addEventListener('load', function() {
            const canvas = document.getElementById('bpChart');
            if (canvas) {
                const ctx = canvas.getContext('2d');
                ctx.strokeStyle = '#667eea';
                ctx.fillStyle = '#667eea';
                
                ctx.beginPath();
                ctx.moveTo(40, 10);
                ctx.lineTo(40, 210);
                ctx.lineTo(280, 210);
                ctx.stroke();
                
                ctx.strokeStyle = '#e0e0e0';
                for (let i = 0; i < 5; i++) {
                    ctx.beginPath();
                    ctx.moveTo(40, 10 + i * 50);
                    ctx.lineTo(280, 10 + i * 50);
                    ctx.stroke();
                }
                
                const points = [
                    {x: 80, y: 100},
                    {x: 120, y: 80},
                    {x: 160, y: 110},
                    {x: 200, y: 90},
                    {x: 240, y: 105}
                ];
                
                ctx.fillStyle = '#667eea';
                points.forEach(point => {
                    ctx.beginPath();
                    ctx.arc(point.x, point.y, 5, 0, Math.PI * 2);
                    ctx.fill();
                });
                
                ctx.fillStyle = '#666';
                ctx.font = '12px Arial';
                ctx.fillText('120/80', 5, 110);
                ctx.fillText('110/70', 5, 160);
            }
            
            // Initialize Blood Pressure Scatter Plot
            initBPScatterPlot();
            
            // Initialize Sleep Pie Chart
            initSleepPieChart();
            initSleepPieChartNew();
            
            // Initialize Stress Gauge
            initStressGauge();
        });

        function initSleepPieChartNew() {
            const canvas = document.getElementById('sleepPieChartNew');
            if (!canvas) return;
            
            canvas.width = 280;
            canvas.height = 280;
            
            const ctx = canvas.getContext('2d');
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const radius = Math.min(centerX, centerY) - 20;
            
            // Sleep data
            const sleepData = [
                { label: 'Light', percentage: 50, color: '#a8b5e6', angle: 0 },
                { label: 'Awake', percentage: 5, color: '#e8e8e8', angle: 0 },
                { label: 'REM', percentage: 24, color: '#9b7bb5', angle: 0 },
                { label: 'Deep', percentage: 21, color: '#e64db8', angle: 0 }
            ];
            
            // Calculate angles
            let currentAngle = -Math.PI / 2;
            sleepData.forEach(segment => {
                segment.startAngle = currentAngle;
                const segmentAngle = (segment.percentage / 100) * 2 * Math.PI;
                segment.endAngle = currentAngle + segmentAngle;
                currentAngle = segment.endAngle;
            });
            
            // Draw pie chart with shadow
            ctx.shadowColor = 'rgba(0, 0, 0, 0.1)';
            ctx.shadowBlur = 10;
            ctx.shadowOffsetX = 0;
            ctx.shadowOffsetY = 5;
            
            sleepData.forEach(segment => {
                ctx.beginPath();
                ctx.moveTo(centerX, centerY);
                ctx.arc(centerX, centerY, radius, segment.startAngle, segment.endAngle);
                ctx.closePath();
                ctx.fillStyle = segment.color;
                ctx.fill();
            });
            
            // Reset shadow
            ctx.shadowColor = 'transparent';
            ctx.shadowBlur = 0;
            
            // Draw white borders between segments
            sleepData.forEach(segment => {
                ctx.beginPath();
                ctx.moveTo(centerX, centerY);
                ctx.arc(centerX, centerY, radius, segment.startAngle, segment.endAngle);
                ctx.closePath();
                ctx.strokeStyle = '#fff';
                ctx.lineWidth = 3;
                ctx.stroke();
            });
            
            // Make canvas interactive
            canvas.addEventListener('click', function(e) {
                const rect = canvas.getBoundingClientRect();
                const x = e.clientX - rect.left - rect.width / 2;
                const y = e.clientY - rect.top - rect.height / 2;
                
                const distance = Math.sqrt(x * x + y * y);
                
                if (distance <= radius) {
                    let angle = Math.atan2(y, x);
                    if (angle < -Math.PI / 2) angle += 2 * Math.PI;
                    
                    sleepData.forEach(segment => {
                        let startAngle = segment.startAngle;
                        let endAngle = segment.endAngle;
                        
                        if (startAngle < -Math.PI / 2) startAngle += 2 * Math.PI;
                        if (endAngle < -Math.PI / 2) endAngle += 2 * Math.PI;
                        
                        if (angle >= startAngle && angle <= endAngle) {
                            showSleepStageInfo(segment);
                        }
                    });
                }
            });
        }

        function initStressGauge() {
            const canvas = document.getElementById('stressGaugeCanvas');
            if (!canvas) return;
            
            // Set canvas size for better resolution
            canvas.width = 400;
            canvas.height = 280;
            
            const ctx = canvas.getContext('2d');
            const centerX = canvas.width / 2;
            const centerY = canvas.height - 30;
            const radius = Math.min(canvas.width, canvas.height) * 0.85;
            
            const stressValue = currentStressLevel; // Use current stress value
            
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Draw gauge arc
            const startAngle = Math.PI;
            const endAngle = 2 * Math.PI;
            
            // Draw background arc
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius * 0.65, startAngle, endAngle);
            ctx.lineWidth = 40;
            ctx.strokeStyle = '#d0d0d0';
            ctx.stroke();
            
            // Draw colored gauge arc
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius * 0.65, startAngle, endAngle);
            ctx.lineWidth = 40;
            ctx.strokeStyle = '#22c55e';
            ctx.stroke();
            
            // Draw tick marks and labels for 0, 1, 2, 3
            ctx.fillStyle = '#333';
            ctx.font = 'bold 18px Arial';
            ctx.textAlign = 'center';
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 3;
            
            for (let i = 0; i <= 3; i++) {
                const angle = Math.PI + (i / 3.0) * Math.PI;
                
                // Draw tick mark
                const tickStart = radius * 0.52;
                const tickEnd = radius * 0.48;
                const tickX1 = centerX + Math.cos(angle) * tickStart;
                const tickY1 = centerY + Math.sin(angle) * tickStart;
                const tickX2 = centerX + Math.cos(angle) * tickEnd;
                const tickY2 = centerY + Math.sin(angle) * tickEnd;
                
                ctx.beginPath();
                ctx.moveTo(tickX1, tickY1);
                ctx.lineTo(tickX2, tickY2);
                ctx.stroke();
                
                // Draw label
                const labelRadius = radius * 0.75;
                const labelX = centerX + Math.cos(angle) * labelRadius;
                const labelY = centerY + Math.sin(angle) * labelRadius;
                
                ctx.fillText(i + '.0', labelX, labelY + 5);
            }
            
            // Calculate needle angle based on stress value (0.0 to 3.0)
            const needleAngle = Math.PI + (stressValue / 3.0) * Math.PI;
            
            // Draw needle
            const needleLength = radius * 0.58;
            const needleX = centerX + Math.cos(needleAngle) * needleLength;
            const needleY = centerY + Math.sin(needleAngle) * needleLength;
            
            ctx.beginPath();
            ctx.moveTo(centerX, centerY);
            ctx.lineTo(needleX, needleY);
            ctx.lineWidth = 12;
            ctx.strokeStyle = '#2d5f1e';
            ctx.lineCap = 'round';
            ctx.stroke();
            
            // Draw center circle
            ctx.beginPath();
            ctx.arc(centerX, centerY, 15, 0, 2 * Math.PI);
            ctx.fillStyle = '#2d5f1e';
            ctx.fill();
            
            // Make gauge interactive
            canvas.onclick = function() {
                showStressDetails(stressValue);
            };
        }

        function showStressDetails(value) {
            let level = '';
            let description = '';
            let tips = '';
            
            if (value < 1.0) {
                level = 'Low';
                description = 'You may be feeling calm, relaxed or sleepy.';
                tips = 'This is a good stress level. Continue your current healthy habits!';
            } else if (value < 2.0) {
                level = 'Medium';
                description = 'You may be feeling neutral, alert or mildly activated.';
                tips = 'Your stress level is moderate. Consider taking breaks and practicing relaxation techniques.';
            } else {
                level = 'High';
                description = 'You may be feeling excited, stressed or highly activated.';
                tips = 'Your stress level is elevated. Try deep breathing, meditation, or talking to someone you trust.';
            }
            
            const message = `Stress Level: ${level}\nScore: ${value}\n\n${description}\n\nTip: ${tips}`;
            alert(message);
        }

        function initSleepPieChart() {
            const canvas = document.getElementById('sleepPieChart');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const radius = Math.min(centerX, centerY) - 20;
            
            // Sleep data
            const sleepData = [
                { label: 'Light', percentage: 50, color: '#a8b5e6', angle: 0 },
                { label: 'Awake', percentage: 5, color: '#e8e8e8', angle: 0 },
                { label: 'REM', percentage: 24, color: '#9b7bb5', angle: 0 },
                { label: 'SWS (DEEP)', percentage: 21, color: '#e64db8', angle: 0 }
            ];
            
            // Calculate angles
            let currentAngle = -Math.PI / 2; // Start at top
            sleepData.forEach(segment => {
                segment.startAngle = currentAngle;
                const segmentAngle = (segment.percentage / 100) * 2 * Math.PI;
                segment.endAngle = currentAngle + segmentAngle;
                currentAngle = segment.endAngle;
            });
            
            // Draw pie chart
            sleepData.forEach(segment => {
                ctx.beginPath();
                ctx.moveTo(centerX, centerY);
                ctx.arc(centerX, centerY, radius, segment.startAngle, segment.endAngle);
                ctx.closePath();
                ctx.fillStyle = segment.color;
                ctx.fill();
                ctx.strokeStyle = '#fff';
                ctx.lineWidth = 2;
                ctx.stroke();
            });
            
            // Add labels
            sleepData.forEach(segment => {
                const midAngle = (segment.startAngle + segment.endAngle) / 2;
                const labelRadius = radius * 0.7;
                const labelX = centerX + Math.cos(midAngle) * labelRadius;
                const labelY = centerY + Math.sin(midAngle) * labelRadius;
                
                ctx.fillStyle = '#333';
                ctx.font = 'bold 14px Arial';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                
                // Draw label text
                const lines = segment.label.split(' ');
                lines.forEach((line, i) => {
                    ctx.fillText(line, labelX, labelY + (i - lines.length/2 + 0.5) * 16);
                });
                
                // Draw percentage
                ctx.font = 'bold 12px Arial';
                ctx.fillText(segment.percentage + '%', labelX, labelY + 20);
            });
            
            // Make canvas interactive
            canvas.addEventListener('click', function(e) {
                const rect = canvas.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                const dx = x - centerX;
                const dy = y - centerY;
                const distance = Math.sqrt(dx * dx + dy * dy);
                
                if (distance <= radius) {
                    let angle = Math.atan2(dy, dx);
                    if (angle < -Math.PI / 2) angle += 2 * Math.PI;
                    
                    sleepData.forEach(segment => {
                        let startAngle = segment.startAngle;
                        let endAngle = segment.endAngle;
                        
                        if (startAngle < -Math.PI / 2) startAngle += 2 * Math.PI;
                        if (endAngle < -Math.PI / 2) endAngle += 2 * Math.PI;
                        
                        if (angle >= startAngle && angle <= endAngle) {
                            showSleepStageInfo(segment);
                        }
                    });
                }
            });
        }

        function showSleepStageInfo(segment) {
            const totalMinutes = 8 * 60 + 54; // 8:54 hours
            const stageMinutes = Math.round((segment.percentage / 100) * totalMinutes);
            const hours = Math.floor(stageMinutes / 60);
            const minutes = stageMinutes % 60;
            
            let info = `${segment.label}\n\n`;
            info += `Percentage: ${segment.percentage}%\n`;
            info += `Duration: ${hours}h ${minutes}m\n\n`;
            
            if (segment.label === 'Light') {
                info += 'Light sleep is important for memory consolidation and physical recovery.';
            } else if (segment.label === 'REM') {
                info += 'REM sleep is crucial for emotional regulation, memory, and learning.';
            } else if (segment.label === 'SWS (DEEP)') {
                info += 'Deep sleep is essential for physical restoration and immune system support.';
            } else if (segment.label === 'Awake') {
                info += 'Brief awakenings are normal during the night.';
            }
            
            alert(info);
        }

        function initBPScatterPlot() {
            const plot = document.getElementById('bpScatterPlot');
            if (!plot) return;
            
            // Create grid
            const grid = document.createElement('div');
            grid.className = 'bp-grid';
            
            // Horizontal grid lines with labels
            const yValues = [
                { value: '140/90', position: 15 },
                { value: '120/80', position: 40 },
                { value: '110/70', position: 75 }
            ];
            
            yValues.forEach(item => {
                const line = document.createElement('div');
                line.className = 'bp-grid-line';
                line.style.top = item.position + '%';
                
                const label = document.createElement('span');
                label.className = 'bp-y-label';
                label.textContent = item.value;
                line.appendChild(label);
                
                grid.appendChild(line);
            });
            
            // Vertical grid lines with labels
            const xValues = [0, 10, 20, 30, 40];
            xValues.forEach((value, index) => {
                const line = document.createElement('div');
                line.className = 'bp-grid-line-vertical';
                line.style.left = (index * 25) + '%';
                
                const label = document.createElement('span');
                label.className = 'bp-x-label';
                label.textContent = value;
                line.appendChild(label);
                
                grid.appendChild(line);
            });
            
            plot.appendChild(grid);
            
            // Add single data point
            const dot = document.createElement('div');
            dot.className = 'bp-data-point';
            dot.style.left = currentBPReading.x + '%';
            dot.style.top = currentBPReading.y + '%';
            dot.title = `${currentBPReading.reading} - ${currentBPReading.date}`;
            
            dot.onclick = function() {
                showBPReading(currentBPReading.reading, currentBPReading.date);
            };
            
            plot.appendChild(dot);
        }

        function showBPReading(reading, date) {
            alert(`Blood Pressure: ${reading}\nDate: ${date}\n\nThis reading is within the normal range. Keep up the healthy lifestyle!`);
        }

        function addBPReading() {
            const input = document.getElementById('bpInput');
            const value = input.value.trim();
            
            // Validate format (e.g., 120/80)
            const bpRegex = /^(\d{2,3})\/(\d{2,3})$/;
            const match = value.match(bpRegex);
            
            if (!match) {
                alert('Please enter blood pressure in format: XXX/XX (e.g., 120/80)');
                return;
            }
            
            const systolic = parseInt(match[1]);
            const diastolic = parseInt(match[2]);
            
            // Validate ranges
            if (systolic < 70 || systolic > 200 || diastolic < 40 || diastolic > 130) {
                alert('Please enter valid blood pressure values:\nSystolic: 70-200\nDiastolic: 40-130');
                return;
            }
            
            // Determine which line to place the point on based on the reading
            let yPosition;
            if (systolic >= 135) {
                yPosition = 15; // 140/90 line
            } else if (systolic >= 115) {
                yPosition = 40; // 120/80 line
            } else {
                yPosition = 75; // 110/70 line
            }
            
            // Update current BP reading
            const today = new Date();
            const dateStr = today.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
            
            currentBPReading = {
                reading: value,
                date: dateStr,
                x: 50, // Center position
                y: yPosition
            };
            
            // Redraw the plot
            refreshBPPlot();
            
            input.value = '';
            alert(`Blood Pressure reading ${value} updated!\nDate: ${dateStr}`);
        }

        function refreshBPPlot() {
            const plot = document.getElementById('bpScatterPlot');
            if (!plot) return;
            
            // Clear existing point
            const existingPoint = plot.querySelector('.bp-data-point');
            if (existingPoint) {
                existingPoint.remove();
            }
            
            // Add updated point
            const dot = document.createElement('div');
            dot.className = 'bp-data-point';
            dot.style.left = currentBPReading.x + '%';
            dot.style.top = currentBPReading.y + '%';
            dot.title = `${currentBPReading.reading} - ${currentBPReading.date}`;
            
            dot.onclick = function() {
                showBPReading(currentBPReading.reading, currentBPReading.date);
            };
            
            plot.appendChild(dot);
        }
    </script>
</body>
</html>
